"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[108],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>h});var n=r(7294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var s=n.createContext({}),c=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(r),d=i,h=p["".concat(s,".").concat(d)]||p[d]||m[d]||o;return r?n.createElement(h,a(a({ref:t},u),{},{components:r})):n.createElement(h,a({ref:t},u))}));function h(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=r.length,a=new Array(o);a[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:i,a[1]=l;for(var c=2;c<o;c++)a[c]=r[c];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},3428:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var n=r(7462),i=(r(7294),r(3905));const o={sidebar_position:3},a="\ud83d\udcc4 Writing YAML with Validation",l={unversionedId:"tutorials/setting-up-yaml-schema",id:"tutorials/setting-up-yaml-schema",title:"\ud83d\udcc4 Writing YAML with Validation",description:"When working with YAML files, validating them is like a superpower that saves you a lot of time and effort.",source:"@site/docs/tutorials/setting-up-yaml-schema.mdx",sourceDirName:"tutorials",slug:"/tutorials/setting-up-yaml-schema",permalink:"/tutorials/setting-up-yaml-schema",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tutorials/setting-up-yaml-schema.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"\ud83c\udf0a Writing a Workflow",permalink:"/tutorials/writing-a-workflow"},next:{title:"\ud83d\udca7 Action Catalogue",permalink:"/action-catalogue"}},s={},c=[{value:"Writing with strict typing",id:"writing-with-strict-typing",level:2},{value:"Editor config",id:"editor-config",level:2},{value:"VS Code",id:"vs-code",level:3},{value:"PyCharm",id:"pycharm",level:3}],u={toc:c},p="wrapper";function m(e){let{components:t,...o}=e;return(0,i.kt)(p,(0,n.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"-writing-yaml-with-validation"},"\ud83d\udcc4 Writing YAML with Validation"),(0,i.kt)("p",null,"When working with YAML files, validating them is like a superpower that saves you a lot of time and effort."),(0,i.kt)("p",null,"Each of the actions and workflows in AutoPR clearly define their inputs and outputs.\nBy enabling validation, you inform your editor of these definitions, so it can help you avoid writing invalid YAML."),(0,i.kt)("p",null,"There are three schemas available for validation:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"trigger_schema.json")," - validates trigger files"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"workflow_schema.json")," - validates workflows files"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"strict_workflow_schema.json")," - validates workflows files, with strong typing for workflows")),(0,i.kt)("h2",{id:"writing-with-strict-typing"},"Writing with strict typing"),(0,i.kt)("p",null,"Compared to ",(0,i.kt)("inlineCode",{parentName:"p"},"workflow_schema"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"strict_workflow_schema")," is also aware of workflow definitions (and their inputs/outputs).\nIf you're using it to write workflows that reference themselves, you will need to regenerate it after definining\nthe new workflows' names, inputs and outputs."),(0,i.kt)("p",null,"Regenerate by running ",(0,i.kt)("inlineCode",{parentName:"p"},"python -m autopr.models.config.entrypoints"),"\n(or ",(0,i.kt)("inlineCode",{parentName:"p"},"make schema")," if you're in the root of the AutoPR repository)."),(0,i.kt)("p",null,"Make sure to select the new schema file you generated if you were previously working off a remote URL."),(0,i.kt)("h2",{id:"editor-config"},"Editor config"),(0,i.kt)("p",null,"AutoPR workflows and triggers are strictly typed, and the YAML files that define them are validated against a JSON schema.\nConfiguring these in your editor can help you avoid errors and typos, and can help you discover new features."),(0,i.kt)("h3",{id:"vs-code"},"VS Code"),(0,i.kt)("p",null,"AutoPR includes a ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/irgolic/AutoPR/tree/main/.vscode"},(0,i.kt)("inlineCode",{parentName:"a"},".vscode")," folder"),",\nwhich already contains settings for schema validation. Additionally, make sure you have extension ",(0,i.kt)("inlineCode",{parentName:"p"},"YAML by Red Hat")," installed."),(0,i.kt)("p",null,"If you want to set schema validation for an external repository, simply copy\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/irgolic/AutoPR/tree/main/.vscode"},"the ",(0,i.kt)("inlineCode",{parentName:"a"},".vscode")," folder"),"\ninto the root of your workspace."),(0,i.kt)("p",null,"Alternatively, include one of the following comments to the top of your yaml file:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"for triggers: ",(0,i.kt)("inlineCode",{parentName:"li"},"# yaml-language-server: $schema=https://raw.githubusercontent.com/irgolic/AutoPR/triggers.schema.json")),(0,i.kt)("li",{parentName:"ul"},"for workflows: ",(0,i.kt)("inlineCode",{parentName:"li"},"# yaml-language-server: $schema=https://raw.githubusercontent.com/irgolic/AutoPR/workflows.schema.json")),(0,i.kt)("li",{parentName:"ul"},"for strict workflows: ",(0,i.kt)("inlineCode",{parentName:"li"},"# yaml-language-server: $schema=https://raw.githubusercontent.com/irgolic/AutoPR/workflows-strict.schema.json"))),(0,i.kt)("h3",{id:"pycharm"},"PyCharm"),(0,i.kt)("p",null,"Head to ",(0,i.kt)("inlineCode",{parentName:"p"},"Preferences > Languages & Frameworks > Schemas and DTDs > JSON Schema Mappings")," and add the following mappings:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"AutoPR Triggers: ",(0,i.kt)("inlineCode",{parentName:"li"},"https://raw.githubusercontent.com/irgolic/AutoPR/triggers.schema.json")),(0,i.kt)("li",{parentName:"ul"},"AutoPR Workflows: ",(0,i.kt)("inlineCode",{parentName:"li"},"https://raw.githubusercontent.com/irgolic/AutoPR/workflows.schema.json")),(0,i.kt)("li",{parentName:"ul"},"AutoPR Strict Workflows: ",(0,i.kt)("inlineCode",{parentName:"li"},"https://raw.githubusercontent.com/irgolic/AutoPR/workflows-strict.schema.json"))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"PyCharm Schema Settings",src:r(6181).Z,width:"2188",height:"1656"})),(0,i.kt)("p",null,"Afterwards, while editing a YAML file, select the corresponding schema in the bottom right corner of the editor."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"PyCharm Schema Selection",src:r(9091).Z,width:"1700",height:"1514"})))}m.isMDXComponent=!0},9091:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/pycharm_schema_selection-0a0cb2048c25db7f37be80341e47dc10.gif"},6181:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/pycharm_schema_settings-7a0091369347874c88d215e8bf330860.png"}}]);